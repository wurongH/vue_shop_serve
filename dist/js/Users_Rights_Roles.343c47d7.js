(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users_Rights_Roles"],{"1af6":function(e,t,r){var n=r("63b6");n(n.S,"Array",{isArray:r("9003")})},"20fd":function(e,t,r){"use strict";var n=r("d9f6"),i=r("aebd");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},2666:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入搜索内容"},on:{clear:e.getList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getList},slot:"append"})],1)],1),r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addUserDialog=!0}}},[e._v("添加用户")])],1)],1),r("el-row",[r("el-table",{attrs:{data:e.tableData,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",align:"center",size:"mini",width:"50"}}),e._l(e.column,function(e,t){return r("el-table-column",{key:t,attrs:{align:"center",size:"mini",prop:e.name,"min-width":e.minWidth,label:e.label}})}),r("el-table-column",{attrs:{align:"center",label:"状态","min-width":"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{size:"mini"},on:{change:function(r){return e.userStateChange(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"220px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.ShowEditDialog(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUser(t.row.id)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showRolesDialog(t.row)}}})],1)]}}])})],2)],1),r("el-row",[r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,15],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addUserDialog,width:"40%"},on:{"update:visible":function(t){e.addUserDialog=t},close:e.addDialogClosed}},[r("el-form",{ref:"addUserFormRef",attrs:{model:e.addUserForm,rules:e.addUserFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addUserForm.mobile,callback:function(t){e.$set(e.addUserForm,"mobile",t)},expression:"addUserForm.mobile"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.addUserDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editUserDialog,width:"40%"},on:{"update:visible":function(t){e.editUserDialog=t},close:e.editDialogClosed}},[r("el-form",{ref:"editUserFormRef",attrs:{model:e.editUserForm,rules:e.editUserFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{size:"small",disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{size:"small"},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{attrs:{size:"small"},model:{value:e.editUserForm.mobile,callback:function(t){e.$set(e.editUserForm,"mobile",t)},expression:"editUserForm.mobile"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.editUserDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRolesDialog,width:"40%"},on:{"update:visible":function(t){e.setRolesDialog=t},close:e.setRolDialogClosed}},[r("div",[r("p",[e._v("当前用户："+e._s(e.userInfo.username))]),r("p",[e._v("当前角色："+e._s(e.userInfo.role_name))]),r("p",[e._v("分配新角色：\n        "),r("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.setRolesDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setRoles}},[e._v("确 定")])],1)])],1)},i=[],o=(r("96cf"),r("3b8d")),s=(r("3c43"),r("f8d6")),a={data:function(){var e=function(e,t,r){var n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(n.test(t))return r();r(new Error("请输入合法邮箱"))},t=function(e,t,r){var n=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(n.test(t))return r();r(new Error("请输入合法手机号"))};return{tableData:[],column:[{name:"username",label:"姓名",minWidth:"160px"},{name:"email",label:"邮箱",minWidth:"160px"},{name:"mobile",label:"电话",minWidth:"160px"},{name:"role_name",label:"角色",minWidth:"160px"}],addUserDialog:!1,addUserForm:{username:"",password:"",email:"",mobile:""},addUserFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名长度在 3 到 10 个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},editUserDialog:!1,editUserForm:{},editUserFormRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},setRolesDialog:!1,rolesList:[],userInfo:{},selectedRoleId:""}},mixins:[s["a"]],created:function(){this.getList()},methods:{getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users",{params:this.queryInfo});case 2:t=e.sent,r=t.data,200==r.meta.status?(this.tableData=r.data.users,this.total=r.data.total):this.$message({message:r.meta.msg,type:"error"});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),userStateChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("users/".concat(t.id,"/state/").concat(t.mg_state));case 2:r=e.sent,n=r.data,200==n.meta.status?this.$message({message:n.meta.msg,type:"success"}):(t.mg_state=!t.mg_state,this.$message({message:n.meta.msg,type:"error"}));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addDialogClosed:function(){this.$refs.addUserFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addUserFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.post("users",e.addUserForm);case 3:n=t.sent,i=n.data,201==i.meta.status?(e.$message({message:i.meta.msg,type:"success"}),e.addUserDialog=!1,e.getList()):e.$message({message:i.meta.msg,type:"error"});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},ShowEditDialog:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users/"+t);case 2:r=e.sent,n=r.data,200==n.meta.status?(this.editUserForm=n.data,this.editUserDialog=!0):this.$message({message:n.meta.msg,type:"error"});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),editDialogClosed:function(){this.$refs.editUserFormRef.resetFields()},editUser:function(){var e=this;this.$refs.editUserFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.put("users/"+e.editUserForm.id,{email:e.editUserForm.email,mobile:e.editUserForm.mobile});case 3:n=t.sent,i=n.data,200==i.meta.status?(e.$message({message:i.meta.msg,type:"success"}),e.editUserDialog=!1,e.getList()):e.$message({message:i.meta.msg,type:"error"});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},removeUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if(r=e.sent,"confirm"!=r){e.next=11;break}return e.next=6,this.$http.delete("users/"+t);case 6:n=e.sent,i=n.data,200==i.meta.status?(this.$message({message:i.meta.msg,type:"success"}),this.getList()):this.$message({message:i.meta.msg,type:"error"}),e.next=12;break;case 11:this.$message({message:"已取消删除",type:"info"});case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),showRolesDialog:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.userInfo=t,e.next=3,this.$http.get("roles");case 3:r=e.sent,n=r.data,200==n.meta.status?(this.rolesList=n.data,this.setRolesDialog=!0):this.$message({msg:n.meta.msg,type:"error"});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setRolDialogClosed:function(){this.selectedRoleId="",this.userInfo={}},setRoles:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectedRoleId){e.next=8;break}return e.next=3,this.$http.put("users/".concat(this.userInfo.id,"/role"),{rid:this.selectedRoleId});case 3:t=e.sent,r=t.data,200==r.meta.status?(this.$message({message:r.meta.msg,type:"success"}),this.getList(),this.setRolesDialog=!1):this.$message({message:r.meta.msg,type:"error"}),e.next=9;break;case 8:this.$message({message:"请选择要分配的角色",type:"error"});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},u=a,l=r("2877"),c=Object(l["a"])(u,n,i,!1,null,"4d2c48ec",null);t["default"]=c.exports},2771:function(e,t,r){},"3c43":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},4280:function(e,t,r){"use strict";t["a"]={data:function(){return{documentHeight:""}},watch:{},created:function(){this.getHight(),window.addEventListener("resize",this.getHight)},destroyed:function(){window.removeEventListener("resize",this.getHight)},methods:{getHight:function(){this.documentHeight=window.innerHeight-230+"px"}}}},"4be7":function(e,t,r){(function(t){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
(function(t){"use strict";"function"===typeof bootstrap?bootstrap("promise",t):e.exports=t()})(function(){"use strict";var e=!1;try{throw new Error}catch(fe){e=!!fe.stack}var r,n=D(),i=function(){},o=function(){var e={task:void 0,next:null},r=e,n=!1,i=void 0,s=!1,a=[];function u(){var t,r;while(e.next)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),l(t,r);while(a.length)t=a.pop(),l(t);n=!1}function l(e,t){try{e()}catch(fe){if(s)throw t&&t.exit(),setTimeout(u,0),t&&t.enter(),fe;setTimeout(function(){throw fe},0)}t&&t.exit()}if(o=function(e){r=r.next={task:e,domain:s&&t.domain,next:null},n||(n=!0,i())},"object"===typeof t&&"[object process]"===t.toString()&&t.nextTick)s=!0,i=function(){t.nextTick(u)};else if("function"===typeof setImmediate)i="undefined"!==typeof window?setImmediate.bind(window,u):function(){setImmediate(u)};else if("undefined"!==typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){i=f,c.port1.onmessage=u,u()};var f=function(){c.port2.postMessage(0)};i=function(){setTimeout(u,0),f()}}else i=function(){setTimeout(u,0)};return o.runAfter=function(e){a.push(e),n||(n=!0,i())},o}(),s=Function.call;function a(e){return function(){return s.apply(e,arguments)}}var u,l=a(Array.prototype.slice),c=a(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)do{if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}while(1);for(;r<n;r++)r in this&&(t=e(t,this[r],r));return t}),f=a(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),p=a(Array.prototype.map||function(e,t){var r=this,n=[];return c(r,function(i,o,s){n.push(e.call(t,o,s,r))},void 0),n}),d=Object.create||function(e){function t(){}return t.prototype=e,new t},m=Object.defineProperty||function(e,t,r){return e[t]=r.value,e},h=a(Object.prototype.hasOwnProperty),g=Object.keys||function(e){var t=[];for(var r in e)h(e,r)&&t.push(r);return t},v=a(Object.prototype.toString);function y(e){return e===Object(e)}function b(e){return"[object StopIteration]"===v(e)||e instanceof u}u="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e};var w="From previous event:";function R(t,r){if(e&&r.stack&&"object"===typeof t&&null!==t&&t.stack){for(var n=[],i=r;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(m(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var o=n.join("\n"+w+"\n"),s=k(o);m(t,"stack",{value:s,configurable:!0})}}function k(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var i=t[n];j(i)||x(i)||!i||r.push(i)}return r.join("\n")}function x(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function _(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function j(e){var t=_(e);if(!t)return!1;var i=t[0],o=t[1];return i===r&&o>=n&&o<=ce}function D(){if(e)try{throw new Error}catch(fe){var t=fe.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],i=_(n);if(!i)return;return r=i[0],i[1]}}function $(e,t,r){return function(){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function L(e){return e instanceof C?e:N(e)?Z(e):Q(e)}L.resolve=L,L.nextTick=o,L.longStackSupport=!1;var U=1;function F(){var t,r=[],n=[],i=d(F.prototype),o=d(C.prototype);if(o.promiseDispatch=function(e,i,o){var s=l(arguments);r?(r.push(s),"when"===i&&o[1]&&n.push(o[1])):L.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(r)return o;var e=O(t);return E(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},L.longStackSupport&&e)try{throw new Error}catch(fe){o.stack=fe.stack.substring(fe.stack.indexOf("\n")+1),o.stackCounter=U++}function s(i){t=i,L.longStackSupport&&e&&(o.source=i),c(r,function(e,t){L.nextTick(function(){i.promiseDispatch.apply(i,t)})},void 0),r=void 0,n=void 0}return i.promise=o,i.resolve=function(e){t||s(L(e))},i.fulfill=function(e){t||s(Q(e))},i.reject=function(e){t||s(G(e))},i.notify=function(e){t||c(n,function(t,r){L.nextTick(function(){r(e)})},void 0)},i}function T(e){if("function"!==typeof e)throw new TypeError("resolver must be a function.");var t=F();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.promise}function S(e){return T(function(t,r){for(var n=0,i=e.length;n<i;n++)L(e[n]).then(t,r)})}function C(e,t,r){void 0===t&&(t=function(e){return G(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=d(C.prototype);if(n.promiseDispatch=function(r,i,o){var s;try{s=e[i]?e[i].apply(n,o):t.call(n,i,o)}catch(a){s=G(a)}r&&r(s)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function z(e,t,r,n){return L(e).then(t,r,n)}function O(e){if(E(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function E(e){return e instanceof C}function N(e){return y(e)&&"function"===typeof e.then}function I(e){return E(e)&&"pending"===e.inspect().state}function A(e){return!E(e)||"fulfilled"===e.inspect().state}function q(e){return E(e)&&"rejected"===e.inspect().state}"object"===typeof t&&t&&Object({NODE_ENV:"production",VUE_APP_CLI_UI_URL:"",BASE_URL:"/"})&&Object({NODE_ENV:"production",VUE_APP_CLI_UI_URL:"",BASE_URL:"/"}).Q_DEBUG&&(L.longStackSupport=!0),L.defer=F,F.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(l(arguments,1)):e.resolve(r)}},L.Promise=T,L.promise=T,T.race=S,T.all=ie,T.reject=G,T.resolve=L,L.passByCopy=function(e){return e},C.prototype.passByCopy=function(){return this},L.join=function(e,t){return L(e).join(t)},C.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},L.race=S,C.prototype.race=function(){return this.then(L.race)},L.makePromise=C,C.prototype.toString=function(){return"[object Promise]"},C.prototype.then=function(e,t,r){var n=this,i=F(),o=!1;function s(t){try{return"function"===typeof e?e(t):t}catch(r){return G(r)}}function a(e){if("function"===typeof t){R(e,n);try{return t(e)}catch(r){return G(r)}}return G(e)}function u(e){return"function"===typeof r?r(e):e}return L.nextTick(function(){n.promiseDispatch(function(e){o||(o=!0,i.resolve(s(e)))},"when",[function(e){o||(o=!0,i.resolve(a(e)))}])}),n.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=u(e)}catch(fe){if(r=!0,!L.onerror)throw fe;L.onerror(fe)}r||i.notify(t)}]),i.promise},L.tap=function(e,t){return L(e).tap(t)},C.prototype.tap=function(e){return e=L(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},L.when=z,C.prototype.thenResolve=function(e){return this.then(function(){return e})},L.thenResolve=function(e,t){return L(e).thenResolve(t)},C.prototype.thenReject=function(e){return this.then(function(){throw e})},L.thenReject=function(e,t){return L(e).thenReject(t)},L.nearer=O,L.isPromise=E,L.isPromiseAlike=N,L.isPending=I,C.prototype.isPending=function(){return"pending"===this.inspect().state},L.isFulfilled=A,C.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},L.isRejected=q,C.prototype.isRejected=function(){return"rejected"===this.inspect().state};var P=[],M=[],V=[],H=!0;function B(){P.length=0,M.length=0,H||(H=!0)}function K(e,r){H&&("object"===typeof t&&"function"===typeof t.emit&&L.nextTick.runAfter(function(){-1!==f(M,e)&&(t.emit("unhandledRejection",r,e),V.push(e))}),M.push(e),r&&"undefined"!==typeof r.stack?P.push(r.stack):P.push("(no stack) "+r))}function W(e){if(H){var r=f(M,e);-1!==r&&("object"===typeof t&&"function"===typeof t.emit&&L.nextTick.runAfter(function(){var n=f(V,e);-1!==n&&(t.emit("rejectionHandled",P[r],e),V.splice(n,1))}),M.splice(r,1),P.splice(r,1))}}function G(e){var t=C({when:function(t){return t&&W(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return K(t,e),t}function Q(e){return C({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return g(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function Z(e){var t=F();return L.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}}),t.promise}function J(e){return C({isDef:function(){}},function(t,r){return ne(e,t,r)},function(){return L(e).inspect()})}function X(e,t,r){return L(e).spread(t,r)}function Y(e){return function(){function t(e,t){var o;if("undefined"===typeof StopIteration){try{o=r[e](t)}catch(s){return G(s)}return o.done?L(o.value):z(o.value,n,i)}try{o=r[e](t)}catch(s){return b(s)?L(s.value):G(s)}return z(o,n,i)}var r=e.apply(this,arguments),n=t.bind(t,"next"),i=t.bind(t,"throw");return n()}}function ee(e){L.done(L.async(e)())}function te(e){throw new u(e)}function re(e){return function(){return X([this,ie(arguments)],function(t,r){return e.apply(t,r)})}}function ne(e,t,r){return L(e).dispatch(t,r)}function ie(e){return z(e,function(e){var t=0,r=F();return c(e,function(n,i,o){var s;E(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,z(i,function(n){e[o]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function oe(e){if(0===e.length)return L.resolve();var t=L.defer(),r=0;return c(e,function(n,i,o){var s=e[o];function a(e){t.resolve(e)}function u(e){if(r--,0===r){var n=e||new Error(""+e);n.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+n.message,t.reject(n)}}function l(e){t.notify({index:o,value:e})}r++,z(s,a,u,l)},void 0),t.promise}function se(e){return z(e,function(e){return e=p(e,L),z(ie(p(e,function(e){return z(e,i,i)})),function(){return e})})}function ae(e){return L(e).allSettled()}function ue(e,t){return L(e).then(void 0,void 0,t)}function le(e,t){return L(e).nodeify(t)}L.resetUnhandledRejections=B,L.getUnhandledReasons=function(){return P.slice()},L.stopUnhandledRejectionTracking=function(){B(),H=!1},B(),L.reject=G,L.fulfill=Q,L.master=J,L.spread=X,C.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},L.async=Y,L.spawn=ee,L["return"]=te,L.promised=re,L.dispatch=ne,C.prototype.dispatch=function(e,t){var r=this,n=F();return L.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},L.get=function(e,t){return L(e).dispatch("get",[t])},C.prototype.get=function(e){return this.dispatch("get",[e])},L.set=function(e,t,r){return L(e).dispatch("set",[t,r])},C.prototype.set=function(e,t){return this.dispatch("set",[e,t])},L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])},C.prototype.del=C.prototype["delete"]=function(e){return this.dispatch("delete",[e])},L.mapply=L.post=function(e,t,r){return L(e).dispatch("post",[t,r])},C.prototype.mapply=C.prototype.post=function(e,t){return this.dispatch("post",[e,t])},L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,l(arguments,2)])},C.prototype.send=C.prototype.mcall=C.prototype.invoke=function(e){return this.dispatch("post",[e,l(arguments,1)])},L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])},C.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,l(arguments,1)])},C.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},L.fbind=function(e){var t=L(e),r=l(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(l(arguments))])}},C.prototype.fbind=function(){var e=this,t=l(arguments);return function(){return e.dispatch("apply",[this,t.concat(l(arguments))])}},L.keys=function(e){return L(e).dispatch("keys",[])},C.prototype.keys=function(){return this.dispatch("keys",[])},L.all=ie,C.prototype.all=function(){return ie(this)},L.any=oe,C.prototype.any=function(){return oe(this)},L.allResolved=$(se,"allResolved","allSettled"),C.prototype.allResolved=function(){return se(this)},L.allSettled=ae,C.prototype.allSettled=function(){return this.then(function(e){return ie(p(e,function(e){function t(){return e.inspect()}return e=L(e),e.then(t,t)}))})},L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)},C.prototype.fail=C.prototype["catch"]=function(e){return this.then(void 0,e)},L.progress=ue,C.prototype.progress=function(e){return this.then(void 0,void 0,e)},L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)},C.prototype.fin=C.prototype["finally"]=function(e){if(!e||"function"!==typeof e.apply)throw new Error("Q can't apply finally callback");return e=L(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},L.done=function(e,t,r,n){return L(e).done(t,r,n)},C.prototype.done=function(e,r,n){var i=function(e){L.nextTick(function(){if(R(e,o),!L.onerror)throw e;L.onerror(e)})},o=e||r||n?this.then(e,r,n):this;"object"===typeof t&&t&&t.domain&&(i=t.domain.bind(i)),o.then(void 0,i)},L.timeout=function(e,t,r){return L(e).timeout(t,r)},C.prototype.timeout=function(e,t){var r=F(),n=setTimeout(function(){t&&"string"!==typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},L.delay=function(e,t){return void 0===t&&(t=e,e=void 0),L(e).delay(t)},C.prototype.delay=function(e){return this.then(function(t){var r=F();return setTimeout(function(){r.resolve(t)},e),r.promise})},L.nfapply=function(e,t){return L(e).nfapply(t)},C.prototype.nfapply=function(e){var t=F(),r=l(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},L.nfcall=function(e){var t=l(arguments,1);return L(e).nfapply(t)},C.prototype.nfcall=function(){var e=l(arguments),t=F();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},L.nfbind=L.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=l(arguments,1);return function(){var r=t.concat(l(arguments)),n=F();return r.push(n.makeNodeResolver()),L(e).fapply(r).fail(n.reject),n.promise}},C.prototype.nfbind=C.prototype.denodeify=function(){var e=l(arguments);return e.unshift(this),L.denodeify.apply(void 0,e)},L.nbind=function(e,t){var r=l(arguments,2);return function(){var n=r.concat(l(arguments)),i=F();function o(){return e.apply(t,arguments)}return n.push(i.makeNodeResolver()),L(o).fapply(n).fail(i.reject),i.promise}},C.prototype.nbind=function(){var e=l(arguments,0);return e.unshift(this),L.nbind.apply(void 0,e)},L.nmapply=L.npost=function(e,t,r){return L(e).npost(t,r)},C.prototype.nmapply=C.prototype.npost=function(e,t){var r=l(t||[]),n=F();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},L.nsend=L.nmcall=L.ninvoke=function(e,t){var r=l(arguments,2),n=F();return r.push(n.makeNodeResolver()),L(e).dispatch("post",[t,r]).fail(n.reject),n.promise},C.prototype.nsend=C.prototype.nmcall=C.prototype.ninvoke=function(e){var t=l(arguments,1),r=F();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},L.nodeify=le,C.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){L.nextTick(function(){e(null,t)})},function(t){L.nextTick(function(){e(t)})})},L.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ce=D();return L})}).call(this,r("f28c"))},"549b":function(e,t,r){"use strict";var n=r("d864"),i=r("63b6"),o=r("241e"),s=r("b0dc"),a=r("3702"),u=r("b447"),l=r("20fd"),c=r("7cd6");i(i.S+i.F*!r("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,p=o(e),d="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,g=void 0!==h,v=0,y=c(p);if(g&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==y||d==Array&&a(y))for(t=u(p.length),r=new d(t);t>v;v++)l(r,v,g?h(p[v],v):p[v]);else for(f=y.call(p),r=new d;!(i=f.next()).done;v++)l(r,v,g?s(f,h,[i.value,v],!0):i.value);return r.length=v,r}})},"54a1":function(e,t,r){r("6c1c"),r("1654"),e.exports=r("95d5")},"774e":function(e,t,r){e.exports=r("d2d5")},9003:function(e,t,r){var n=r("6b4c");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"95d5":function(e,t,r){var n=r("40c3"),i=r("5168")("iterator"),o=r("481b");e.exports=r("584a").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},a745:function(e,t,r){e.exports=r("f410")},ac6a:function(e,t,r){for(var n=r("cadf"),i=r("0d58"),o=r("2aba"),s=r("7726"),a=r("32e9"),u=r("84f2"),l=r("2b4c"),c=l("iterator"),f=l("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(d),h=0;h<m.length;h++){var g,v=m[h],y=d[v],b=s[v],w=b&&b.prototype;if(w&&(w[c]||a(w,c,p),w[f]||a(w,f,v),u[v]=p,y))for(g in n)w[g]||o(w,g,n[g],!0)}},c8bb:function(e,t,r){e.exports=r("54a1")},d2d5:function(e,t,r){r("1654"),r("549b"),e.exports=r("584a").Array.from},d332:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),e.showRolesCard?e._e():r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addRolesDialog=!0}}},[e._v("\n          添加角色\n        ")])],1)],1),r("el-table",{attrs:{data:e.rolesList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,function(n,i){return r("el-row",{key:n.id,class:["bd-bottom",0==i?"bd-top":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removeRight(t.row,n.id)}}},[e._v("\n                "+e._s(n.authName)+"\n              ")]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(n.children,function(n,i){return r("el-row",{key:n.id,class:[0==i?"":"bd-top","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.removeRight(t.row,n.id)}}},[e._v("\n                    "+e._s(n.authName)+"\n                  ")]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(n.children,function(n){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.removeRight(t.row,n.id)}}},[e._v("\n                    "+e._s(n.authName)+"\n                  ")])}),1)],1)}),1)],1)})}}],null,!1,1500894515)}),r("el-table-column",{attrs:{type:"index",align:"center"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName",align:"center"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.showEditDialog(t.row.id)}}},[e._v("\n           编辑\n           ")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.removeRoles(t.row.id)}}},[e._v("\n          删除\n          ")]),r("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-setting"},on:{click:function(r){return e.showSetRolesDiaog(t.row)}}},[e._v("\n          权限分配\n        ")])]}}],null,!1,280411234)})],1)],1),e.showRolesCard?r("el-card",[r("header",{staticClass:"header"},[e._v("分配权限")]),r("el-row",{staticClass:"tree",style:{height:e.documentHeight}},[r("el-tree",{ref:"treeRef",attrs:{data:e.rightslist,props:e.treeProps,"node-key":"id","show-checkbox":"","default-expand-all":"","default-checked-keys":e.defKeys}})],1),r("el-row",{staticClass:"r-btn"},[r("el-button",{attrs:{size:"small"},on:{click:e.setRolesCadrClosed}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allRights}},[e._v("确定")])],1)],1):e._e(),r("el-dialog",{attrs:{title:"添加角色",visible:e.addRolesDialog,width:"40%"},on:{"update:visible":function(t){e.addRolesDialog=t},close:e.addRolesDialogClosed}},[r("el-form",{ref:"addRolesRef",attrs:{model:e.addRolesForm,rules:e.addRolesRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addRolesForm.roleName,callback:function(t){e.$set(e.addRolesForm,"roleName",t)},expression:"addRolesForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{attrs:{size:"small"},model:{value:e.addRolesForm.roleDesc,callback:function(t){e.$set(e.addRolesForm,"roleDesc",t)},expression:"addRolesForm.roleDesc"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.addRolesDialog=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRoles}},[e._v("确定")])],1)],1),r("el-dialog",{attrs:{title:"修改角色",visible:e.editRolesDialog,width:"40%"},on:{"update:visible":function(t){e.editRolesDialog=t}}},[r("el-form",{ref:"editRolesRef",attrs:{model:e.editRolesForm,rules:e.editRolesRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{size:"small"},model:{value:e.editRolesForm.roleName,callback:function(t){e.$set(e.editRolesForm,"roleName",t)},expression:"editRolesForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{attrs:{size:"small"},model:{value:e.editRolesForm.roleDesc,callback:function(t){e.$set(e.editRolesForm,"roleDesc",t)},expression:"editRolesForm.roleDesc"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.editRolesDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editRules}},[e._v("确 定")])],1)],1)],1)},i=[],o=r("a745"),s=r.n(o);function a(e){if(s()(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var u=r("774e"),l=r.n(u),c=r("c8bb"),f=r.n(c);function p(e){if(f()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return l()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){return a(e)||p(e)||d()}r("ac6a"),r("96cf");var h=r("3b8d"),g=(r("4be7"),r("4280")),v={data:function(){return{showRolesCard:!1,addRolesDialog:!1,addRolesForm:{roleName:"",roleDesc:""},addRolesRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{}]},rolesList:[],editRolesForm:{},editRolesRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{}]},editRolesDialog:!1,setRolesDialog:!1,rightslist:[],treeProps:{label:"authName",children:"children"},defKeys:[],roleId:""}},mixins:[g["a"]],created:function(){this.getRolesList()},methods:{addRolesDialogClosed:function(){this.$refs.addRolesRef.resetFields()},addRoles:function(){var e=this;this.$refs.addRolesRef.validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.post("roles",e.addRolesForm);case 3:n=t.sent,i=n.data,201==i.meta.status?(e.$message({message:i.meta.msg,type:"success"}),e.addRolesDialog=!1,e.getRolesList()):e.$message({message:i.meta.msg,type:"error"});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},getRolesList:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles");case 2:t=e.sent,r=t.data,200==r.meta.status?this.rolesList=r.data:this.$message({message:r.meta.msg,type:"error"});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),showEditDialog:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles/"+t);case 2:r=e.sent,n=r.data,200===n.meta.status?(this.editRolesForm=n.data,this.editRolesDialog=!0):this.$message({message:n.meta.msg,type:"error"});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),editRules:function(){var e=this;this.$refs.editRolesRef.validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return t.next=3,e.$http.put("roles/"+e.editRolesForm.roleId,{roleName:e.editRolesForm.roleName,roleDesc:e.editRolesForm.roleDesc});case 3:n=t.sent,i=n.data,200===i.meta.status?(e.$message({message:i.meta.msg,type:"success"}),e.editRolesDialog=!1,e.getRolesList()):e.$message({message:i.meta.msg,type:"error"});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},removeRoles:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if(r=e.sent,"confirm"!=r){e.next=11;break}return e.next=6,this.$http.delete("roles/"+t);case 6:n=e.sent,i=n.data,200===i.meta.status?(this.$message({message:i.meta.msg,type:"success"}),this.getRolesList()):this.$message({message:i.meta.msg,type:"error"}),e.next=12;break;case 11:this.$message({message:"已取消删除",type:"info"});case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),removeRight:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var n,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if(n=e.sent,"confirm"!=n){e.next=11;break}return e.next=6,this.$http.delete("roles/".concat(t.id,"/rights/").concat(r));case 6:i=e.sent,o=i.data,200===o.meta.status?(this.$message({message:o.meta.msg,type:"success"}),t.children=o.data):this.$message({message:o.meta.msg,type:"error"}),e.next=12;break;case 11:this.$message({message:"已取消删除",type:"info"});case 12:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),setRolesCadrClosed:function(){this.showRolesCard=!1,this.defKeys=[]},showSetRolesDiaog:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.roleId=t.id,e.next=3,this.$http.get("rights/tree");case 3:r=e.sent,n=r.data,200===n.meta.status?(this.rightslist=n.data,this.getLeafKeys(t,this.defKeys),this.showRolesCard=!0):this.$message({message:n.meta.msg,type:"error"});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getLeafKeys:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach(function(e){return r.getLeafKeys(e,t)})},allRights:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[].concat(m(this.$refs.treeRef.getCheckedKeys()),m(this.$refs.treeRef.getHalfCheckedKeys())),r=t.join(","),e.next=4,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:r});case 4:n=e.sent,i=n.data,200===i.meta.status?(this.$message({message:i.meta.msg,type:"success"}),this.getRolesList(),this.showRolesCard=!1):this.$message({message:i.meta.msg,type:"error"});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},y=v,b=(r("d741"),r("2877")),w=Object(b["a"])(y,n,i,!1,null,"5267abfd",null);t["default"]=w.exports},d741:function(e,t,r){"use strict";var n=r("2771"),i=r.n(n);i.a},e62e:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-table",{attrs:{data:e.rightList,border:"",stripe:"",height:e.documentHeight}},[r("el-table-column",{attrs:{type:"index",align:"center",size:"mini",width:"50"}}),e._l(e.rightColumn,function(e,t){return r("el-table-column",{key:t,attrs:{align:"center",size:"mini",prop:e.name,"min-width":e.minWidth,label:e.label}})}),r("el-table-column",{attrs:{align:"center",label:"权限等级",prop:"level",minWidth:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.level?r("el-tag",[e._v("一级")]):"1"==t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],2)],1)],1)},i=[],o=(r("96cf"),r("3b8d")),s=r("4280"),a={data:function(){return{rightList:[],rightColumn:[{name:"authName",label:"权限名称",minWidth:"160px"},{name:"path",label:"路径",minWidth:"160px"}]}},mixins:[s["a"]],created:function(){this.getRightList()},methods:{getRightList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rights/list");case 2:t=e.sent,r=t.data,200===r.meta.status?this.rightList=r.data:this.$message({message:r.meta.msg,type:"error"});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},u=a,l=r("2877"),c=Object(l["a"])(u,n,i,!1,null,"4f9b349f",null);t["default"]=c.exports},f28c:function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}})();var l,c=[],f=!1,p=-1;function d(){f&&l&&(f=!1,l.length?c=l.concat(c):p=-1,c.length&&m())}function m(){if(!f){var e=a(d);f=!0;var t=c.length;while(t){l=c,c=[];while(++p<t)l&&l[p].run();p=-1,t=c.length}l=null,f=!1,u(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||f||a(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},f410:function(e,t,r){r("1af6"),e.exports=r("584a").Array.isArray},f8d6:function(e,t,r){"use strict";t["a"]={data:function(){return{total:0,tableData:[],queryInfo:{query:"",pagenum:1,pagesize:5}}},computed:{},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()}}}}}]);
//# sourceMappingURL=Users_Rights_Roles.343c47d7.js.map